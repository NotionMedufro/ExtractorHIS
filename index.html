<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extractor de Laboratorio HIS</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>游뽘</text></svg>">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <h1>游뽘 Extractor de Valores de Laboratorio HIS</h1>
                <p class="subtitle">Herramienta dise침ada para extraer de manera autom치tica datos concretos de los ex치menes de HIS. En lugar de interpretar el contenido, emplea 칰nicamente operaciones de recorte y reordenamiento de texto basadas en expresiones regulares, sin almacenar ni conservar historial de informaci칩n privada.</p>
                <div class="warning-box">
                    <p class="warning-text">Esta herramienta no sustituye la revisi칩n completa y cr칤tica de los informes: debe utilizarse siempre tras la lectura detallada de los ex치menes, con el fin de agilizar la extracci칩n manual de datos y estandarizar su presentaci칩n.</p>
                </div>
            </div>
        </header>

        <main class="main-content">
            <div class="two-column-layout">
                <!-- Columna Izquierda: Controles -->
                <div class="left-column">
                    <div class="step-card">
                        <div class="header-with-fecha">
                            <h2>
                                <svg class="params-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor">
                                    <path d='M3 9v10.4c0 .56 0 .84.109 1.054a1 1 0 0 0 .437.437C3.76 21 4.04 21 4.598 21H15m-8-7.2V6.2c0-1.12 0-1.68.218-2.108.192-.377.497-.682.874-.874C8.52 3 9.08 3 10.2 3h7.6c1.12 0 1.68 0 2.108.218a2 2 0 0 1 .874.874C21 4.52 21 5.08 21 6.2v7.6c0 1.12 0 1.68-.218 2.108a2.001 2.001 0 0 1-.874.874c-.428.218-.986.218-2.104.218h-7.607c-1.118 0-1.678 0-2.105-.218a2 2 0 0 1-.874-.874C7 15.48 7 14.92 7 13.8'/>
                                    <path d='m11.6 10.323 1.379 1.575a.299.299 0 0 0 .466-.022L16.245 8'/>
                                </svg>
                                Par치metros a extraer
                            </h2>
                            <label class="fecha-toggle">
                                <input type="checkbox" value="Fecha" class="selection-checkbox">
                                <span class="checkmark-compact"></span>
                                <span class="selection-label-compact">Fecha</span>
                            </label>
                        </div>
                        
                        <div class="selection-grid-compact">
                            <label class="selection-item-compact">
                                <input type="checkbox" value="Hemograma" class="selection-checkbox">
                                <span class="checkmark-compact"></span>
                                <span class="selection-label-compact">Hemograma + PCR</span>
                            </label>
                            
                            <label class="selection-item-compact">
                                <input type="checkbox" value="Renal" class="selection-checkbox">
                                <span class="checkmark-compact"></span>
                                <span class="selection-label-compact">Renal</span>
                            </label>
                            
                            <label class="selection-item-compact">
                                <input type="checkbox" value="Hep치tico" class="selection-checkbox">
                                <span class="checkmark-compact"></span>
                                <span class="selection-label-compact">Hep치tico</span>
                            </label>
                            
                            <label class="selection-item-compact">
                                <input type="checkbox" value="Coagulaci칩n" class="selection-checkbox">
                                <span class="checkmark-compact"></span>
                                <span class="selection-label-compact">Coagulaci칩n</span>
                            </label>
                            
                            <label class="selection-item-compact">
                                <input type="checkbox" value="Nutricional" class="selection-checkbox">
                                <span class="checkmark-compact"></span>
                                <span class="selection-label-compact">Nutricional</span>
                            </label>
                            
                            <label class="selection-item-compact">
                                <input type="checkbox" value="Gases" class="selection-checkbox">
                                <span class="checkmark-compact"></span>
                                <span class="selection-label-compact">Gases</span>
                            </label>
                        </div>
                        
                        <div class="utility-buttons">
                            <button id="selectAllBtn" class="utility-button">Seleccionar todo</button>
                            <button id="clearAllBtn" class="utility-button">Borrar todo</button>
                        </div>
                    </div>

                    <div class="step-card">
                        <h2>
                            <svg class="text-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor">
                                <path d='M9.478 3H7.25A2.25 2.25 0 0 0 5 5.25v13.5A2.25 2.25 0 0 0 7.25 21h9a2.25 2.25 0 0 0 2.25-2.25V12M9.478 3c1.243 0 2.272 1.007 2.272 2.25V7.5A2.25 2.25 0 0 0 14 9.75h2.25A2.25 2.25 0 0 1 18.5 12M9.478 3c3.69 0 9.022 5.36 9.022 9M9 16.5h6m-6-3h4'/>
                            </svg>
                            Texto del Examen
                        </h2>
                        <div class="input-group">
                            <textarea id="copyPasteText" 
                                    placeholder="1. En la p치gina pdf del examen presiona: Ctrl + A para seleccionar todo el texto
2. Copia el texto mediante: Ctrl + C
3. Pega el texto aqu칤 mediante: Ctrl + V"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Columna Derecha: Resultados -->
                <div class="right-column">
                    <div class="step-card results-card">
                        <h2>
                            <svg class="result-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor">
                                <path d='M4.077 3c2.81 2.202 4.406 4.157 4.785 5.866.38 1.709.436 3.336.172 4.88H4L12.214 21 20 13.747h-4.784C15.192 10.89 14.12 8.46 12 6.46S7.239 3.307 4.077 3'/>
                            </svg>
                            Resultado Extra칤do
                        </h2>
                        
                        <!-- Pesta침as -->
                        <div class="tabs-container">
                            <div class="tabs-header">
                                <button class="tab-button active" data-tab="lista">游늶 Lista</button>
                                <button class="tab-button" data-tab="tabla">游늵 Tabla Comparativa</button>
                            </div>
                            
                            <!-- Contenido de pesta침as -->
                            <div class="tabs-content">
                                <!-- Pesta침a Lista -->
                                <div class="tab-content active" id="tab-lista">
                                    <div class="results-status" id="resultsStatus">
                                        <p class="status-text">Selecciona par치metros y pega el texto para ver los resultados autom치ticamente</p>
                                    </div>
                                    <div id="results" class="results-content"></div>
                                    <div class="copy-area" id="copyArea" style="display: none;">
                                        <button id="copyBtn" class="copy-button">
                                            <span class="copy-icon">游늶</span>
                                            <span class="copy-text">Copiar</span>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Pesta침a Tabla Comparativa -->
<div class="tab-content" id="tab-tabla">
                                    <div class="comparative-table-container">
                                        <p class="status-text">Selecciona par치metros y pega el texto para ver la tabla comparativa autom치ticamente</p>
                                    </div>
                                    <div class="table-actions" id="tableActions" style="display: none;">
                                        <button id="downloadImageBtn" class="copy-button">
                                            <span class="copy-icon">游닞</span>
                                            <span class="copy-text">Descargar como Imagen</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="notification" class="notification"></div>
    
    <!-- HTML2Canvas para convertir tabla a imagen -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
