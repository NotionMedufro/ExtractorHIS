<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extractor de Laboratorio HIS</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round' stroke='currentColor'><path d='M11.79 12 7 8.855m14-2.903L7 15.145M8 6.92c0 1.337-1.12 2.42-2.5 2.42S3 8.256 3 6.919C3 5.583 4.12 4.5 5.5 4.5S8 5.583 8 6.92m0 10.162c0-1.336-1.12-2.42-2.5-2.42S3 15.745 3 17.081 4.12 19.5 5.5 19.5 8 18.417 8 17.08m13 .968-6.066-3.983'/></svg>">
    <!-- Patrones y extractores simplificados (editables) -->
    <script src="patterns.js"></script>
    <script src="extractors.js"></script>
</head>

<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <div class="header-top">
                    <h1><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"
                            style="vertical-align: middle; margin-right: 8px;">
                            <path
                                d='M11.79 12 7 8.855m14-2.903L7 15.145M8 6.92c0 1.337-1.12 2.42-2.5 2.42S3 8.256 3 6.919C3 5.583 4.12 4.5 5.5 4.5S8 5.583 8 6.92m0 10.162c0-1.336-1.12-2.42-2.5-2.42S3 15.745 3 17.081 4.12 19.5 5.5 19.5 8 18.417 8 17.08m13 .968-6.066-3.983' />
                        </svg> Extractor de Laboratorio</h1>

                    <div class="header-actions">
                        <button id="suggestionBtn" class="header-icon-btn" title="Enviar sugerencia">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z">
                                </path>
                                <polyline points="22,6 12,13 2,6"></polyline>
                            </svg>
                        </button>
                        <button id="themeToggle" class="theme-toggle" title="Cambiar tema">
                            <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="5" />
                                <line x1="12" y1="1" x2="12" y2="3" />
                                <line x1="12" y1="21" x2="12" y2="23" />
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
                                <line x1="1" y1="12" x2="3" y2="12" />
                                <line x1="21" y1="12" x2="23" y2="12" />
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
                            </svg>
                            <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
                            </svg>
                        </button>
                    </div>
                </div>
                <p class="subtitle">Herramienta dise침ada para extraer de manera autom치tica datos concretos de los
                    ex치menes de HIS. En lugar de interpretar el contenido, emplea 칰nicamente operaciones de recorte y
                    reordenamiento de texto basadas en expresiones regulares, sin almacenar ni conservar historial de
                    informaci칩n privada.</p>
            </div>
        </header>

        <main class="main-content">
            <div class="step-card">
                <div class="header-with-fecha">
                    <h2>
                        <svg class="params-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                            viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path
                                d='M3 9v10.4c0 .56 0 .84.109 1.054a1 1 0 0 0 .437.437C3.76 21 4.04 21 4.598 21H15m-8-7.2V6.2c0-1.12 0-1.68.218-2.108.192-.377.497-.682.874-.874C8.52 3 9.08 3 10.2 3h7.6c1.12 0 1.68 0 2.108.218a2 2 0 0 1 .874.874C21 4.52 21 5.08 21 6.2v7.6c0 1.12 0 1.68-.218 2.108a2.001 2.001 0 0 1-.874.874c-.428.218-.986.218-2.104.218h-7.607c-1.118 0-1.678 0-2.105-.218a2 2 0 0 1-.874-.874C7 15.48 7 14.92 7 13.8' />
                            <path d='m11.6 10.323 1.379 1.575a.299.299 0 0 0 .466-.022L16.245 8' />
                        </svg>
                        Par치metros a extraer
                    </h2>
                    <div class="header-controls">
                        <div class="utility-buttons-inline">
                            <button id="selectAllBtn" class="utility-button-inline">Todo</button>
                            <button id="clearAllBtn" class="utility-button-inline">Borrar</button>
                        </div>
                        <div class="fecha-control-wrapper">
                            <label class="fecha-toggle">
                                <input type="checkbox" value="Fecha" class="selection-checkbox">
                                <span class="checkmark-compact"></span>
                                <span class="selection-label-compact">Fecha</span>
                            </label>
                            <select id="dateFormatSelect" class="date-format-select" title="Formato de fecha">
                                <option value="dd/mm">dd/mm</option>
                                <option value="dd/mm/yy">dd/mm/aa</option>
                                <option value="dd/mm/yyyy" selected>dd/mm/aaaa</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="selection-grid-compact">
                    <div class="selection-item-with-dropdown draggable-item" draggable="true" data-type="Hemograma">
                        <span class="drag-handle" title="Arrastrar para reordenar">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                <circle cx="9" cy="5" r="2" />
                                <circle cx="15" cy="5" r="2" />
                                <circle cx="9" cy="12" r="2" />
                                <circle cx="15" cy="12" r="2" />
                                <circle cx="9" cy="19" r="2" />
                                <circle cx="15" cy="19" r="2" />
                            </svg>
                        </span>
                        <label class="selection-item-compact hemograma-with-dropdown">
                            <input type="checkbox" value="Hemograma" class="selection-checkbox">
                            <span class="checkmark-compact"></span>
                            <span class="selection-label-compact">Hemograma</span>
                            <button class="dropdown-toggle-inline" data-target="hemograma-dropdown"
                                aria-label="Mostrar opciones adicionales de hemograma">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="6,9 12,15 18,9"></polyline>
                                </svg>
                            </button>
                        </label>
                        <div id="hemograma-dropdown" class="dropdown-content">
                            <div class="dropdown-header">
                                <span class="dropdown-title">Par치metros adicionales de Hemograma</span>
                                <div class="dropdown-buttons">
                                    <button id="selectAllHemogramaBtn" class="dropdown-utility-button">Todo</button>
                                    <button id="clearAllHemogramaBtn" class="dropdown-utility-button">Borrar</button>
                                </div>
                            </div>
                            <div class="dropdown-grid">
                                <label class="dropdown-item">
                                    <input type="checkbox" value="Hcto" class="selection-checkbox hemograma-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">Hcto (Hematocrito)</span>
                                </label>
                                <label class="dropdown-item">
                                    <input type="checkbox" value="VCM" class="selection-checkbox hemograma-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">VCM</span>
                                </label>
                                <label class="dropdown-item">
                                    <input type="checkbox" value="CHCM" class="selection-checkbox hemograma-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">CHCM</span>
                                </label>
                                <label class="dropdown-item">
                                    <input type="checkbox" value="RDW" class="selection-checkbox hemograma-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">RDW</span>
                                </label>
                                <label class="dropdown-item">
                                    <input type="checkbox" value="Reticulocitos"
                                        class="selection-checkbox hemograma-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">Reticulocitos</span>
                                </label>
                                <label class="dropdown-item">
                                    <input type="checkbox" value="Linfocitos"
                                        class="selection-checkbox hemograma-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">%Linfocitos</span>
                                </label>
                                <label class="dropdown-item">
                                    <input type="checkbox" value="RAN" class="selection-checkbox hemograma-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">RAN</span>
                                </label>
                                <label class="dropdown-item">
                                    <input type="checkbox" value="RAL" class="selection-checkbox hemograma-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">RAL</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="selection-wrapper draggable-item" draggable="true" data-type="PCR">
                        <span class="drag-handle" title="Arrastrar para reordenar">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                <circle cx="9" cy="5" r="2" />
                                <circle cx="15" cy="5" r="2" />
                                <circle cx="9" cy="12" r="2" />
                                <circle cx="15" cy="12" r="2" />
                                <circle cx="9" cy="19" r="2" />
                                <circle cx="15" cy="19" r="2" />
                            </svg>
                        </span>
                        <label class="selection-item-compact">
                            <input type="checkbox" value="PCR" class="selection-checkbox">
                            <span class="checkmark-compact"></span>
                            <span class="selection-label-compact">PCR, Proca & VHS</span>
                        </label>
                    </div>

                    <div class="selection-item-with-dropdown draggable-item" draggable="true" data-type="Renal">
                        <span class="drag-handle" title="Arrastrar para reordenar">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                <circle cx="9" cy="5" r="2" />
                                <circle cx="15" cy="5" r="2" />
                                <circle cx="9" cy="12" r="2" />
                                <circle cx="15" cy="12" r="2" />
                                <circle cx="9" cy="19" r="2" />
                                <circle cx="15" cy="19" r="2" />
                            </svg>
                        </span>
                        <label class="selection-item-compact renal-with-dropdown">
                            <input type="checkbox" value="Renal" class="selection-checkbox">
                            <span class="checkmark-compact"></span>
                            <span class="selection-label-compact">Renal</span>
                            <button class="dropdown-toggle-inline" data-target="renal-dropdown"
                                aria-label="Mostrar opciones adicionales de funci칩n renal">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="6,9 12,15 18,9"></polyline>
                                </svg>
                            </button>
                        </label>
                        <div id="renal-dropdown" class="dropdown-content">
                            <div class="dropdown-header">
                                <span class="dropdown-title">Par치metros adicionales de Funci칩n Renal</span>
                                <div class="dropdown-buttons">
                                    <button id="selectAllRenalBtn" class="dropdown-utility-button">Todo</button>
                                    <button id="clearAllRenalBtn" class="dropdown-utility-button">Borrar</button>
                                </div>
                            </div>
                            <div class="dropdown-grid">
                                <label class="dropdown-item">
                                    <input type="checkbox" value="VFG" class="selection-checkbox renal-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">VFG</span>
                                </label>
                                <label class="dropdown-item">
                                    <input type="checkbox" value="Urea" class="selection-checkbox renal-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">Urea</span>
                                </label>
                                <label class="dropdown-item">
                                    <input type="checkbox" value="Magnesio" class="selection-checkbox renal-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">Magnesio</span>
                                </label>
                                <label class="dropdown-item">
                                    <input type="checkbox" value="AcidoUrico" class="selection-checkbox renal-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">츼. 칔rico</span>
                                </label>
                                <label class="dropdown-item">
                                    <input type="checkbox" value="LisisTumoral" class="selection-checkbox renal-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">Lisis Tumoral</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="selection-wrapper draggable-item" draggable="true" data-type="Hep치tico">
                        <span class="drag-handle" title="Arrastrar para reordenar">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                <circle cx="9" cy="5" r="2" />
                                <circle cx="15" cy="5" r="2" />
                                <circle cx="9" cy="12" r="2" />
                                <circle cx="15" cy="12" r="2" />
                                <circle cx="9" cy="19" r="2" />
                                <circle cx="15" cy="19" r="2" />
                            </svg>
                        </span>
                        <label class="selection-item-compact">
                            <input type="checkbox" value="Hep치tico" class="selection-checkbox">
                            <span class="checkmark-compact"></span>
                            <span class="selection-label-compact">Hep치tico</span>
                        </label>
                    </div>

                    <div class="selection-wrapper draggable-item" draggable="true" data-type="Coagulaci칩n">
                        <span class="drag-handle" title="Arrastrar para reordenar">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                <circle cx="9" cy="5" r="2" />
                                <circle cx="15" cy="5" r="2" />
                                <circle cx="9" cy="12" r="2" />
                                <circle cx="15" cy="12" r="2" />
                                <circle cx="9" cy="19" r="2" />
                                <circle cx="15" cy="19" r="2" />
                            </svg>
                        </span>
                        <label class="selection-item-compact">
                            <input type="checkbox" value="Coagulaci칩n" class="selection-checkbox">
                            <span class="checkmark-compact"></span>
                            <span class="selection-label-compact">Coagulaci칩n</span>
                        </label>
                    </div>

                    <div class="selection-item-with-dropdown draggable-item" draggable="true" data-type="Nutricional">
                        <span class="drag-handle" title="Arrastrar para reordenar">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                <circle cx="9" cy="5" r="2" />
                                <circle cx="15" cy="5" r="2" />
                                <circle cx="9" cy="12" r="2" />
                                <circle cx="15" cy="12" r="2" />
                                <circle cx="9" cy="19" r="2" />
                                <circle cx="15" cy="19" r="2" />
                            </svg>
                        </span>
                        <label class="selection-item-compact nutricional-with-dropdown">
                            <input type="checkbox" value="Nutricional" class="selection-checkbox">
                            <span class="checkmark-compact"></span>
                            <span class="selection-label-compact">Nutricional</span>
                            <button class="dropdown-toggle-inline" data-target="nutricional-dropdown"
                                aria-label="Mostrar opciones adicionales de nutricional">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="6,9 12,15 18,9"></polyline>
                                </svg>
                            </button>
                        </label>
                        <div id="nutricional-dropdown" class="dropdown-content">
                            <div class="dropdown-header-compact">
                                <span>L칤pidos y otros</span>
                                <div class="dropdown-actions">
                                    <button class="btn-xs" id="selectAllNutricionalBtn"
                                        title="Seleccionar todo">Todo</button>
                                    <button class="btn-xs" id="clearAllNutricionalBtn"
                                        title="Borrar selecci칩n">Borrar</button>
                                </div>
                            </div>
                            <div class="dropdown-grid">
                                <label class="dropdown-item">
                                    <input type="checkbox" value="PreAlb" class="selection-checkbox nutricional-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">PreAlb</span>
                                </label>
                                <label class="dropdown-item">
                                    <input type="checkbox" value="ColT" class="selection-checkbox nutricional-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">ColT</span>
                                </label>
                                <label class="dropdown-item">
                                    <input type="checkbox" value="LDL" class="selection-checkbox nutricional-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">LDL</span>
                                </label>
                                <label class="dropdown-item">
                                    <input type="checkbox" value="HDL" class="selection-checkbox nutricional-extra">
                                    <span class="checkmark-compact"></span>
                                    <span class="selection-label-compact">HDL</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="selection-wrapper draggable-item" draggable="true" data-type="Gases">
                        <span class="drag-handle" title="Arrastrar para reordenar">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                <circle cx="9" cy="5" r="2" />
                                <circle cx="15" cy="5" r="2" />
                                <circle cx="9" cy="12" r="2" />
                                <circle cx="15" cy="12" r="2" />
                                <circle cx="9" cy="19" r="2" />
                                <circle cx="15" cy="19" r="2" />
                            </svg>
                        </span>
                        <label class="selection-item-compact">
                            <input type="checkbox" value="Gases" class="selection-checkbox">
                            <span class="checkmark-compact"></span>
                            <span class="selection-label-compact">Gases</span>
                        </label>
                    </div>
                </div>

                <!-- Opciones de Formato -->
                <div class="format-options-section">
                    <div class="format-options-header">
                        <span class="format-options-title">丘뙖잺 Formato de salida</span>
                        <div class="format-options-grid">
                            <label class="format-toggle" title="Etiquetar hemoglobina como Hb">
                                <input type="checkbox" id="usarHb" checked>
                                <span class="format-toggle-slider"></span>
                                <span class="format-toggle-label">Hb/Hg</span>
                            </label>
                            <label class="format-toggle" title="Convertir todo a MAY칔SCULAS">
                                <input type="checkbox" id="usarMayusculas">
                                <span class="format-toggle-slider"></span>
                                <span class="format-toggle-label">MAY칔SCULAS</span>
                            </label>
                            <label class="format-toggle" title="Usar dos puntos como separador (: vs nada)">
                                <input type="checkbox" id="usarDosPuntos" checked>
                                <span class="format-toggle-slider"></span>
                                <span class="format-toggle-label">Dos puntos (:)</span>
                            </label>
                            <label class="format-toggle" title="Separar secciones con saltos de l칤nea">
                                <input type="checkbox" id="usarSaltosLinea" checked>
                                <span class="format-toggle-slider"></span>
                                <span class="format-toggle-label">Saltos de l칤nea</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="two-column-layout">
                <div class="left-column">
                    <div class="step-card">
                        <div class="header-with-fecha">
                            <h2>
                                <svg class="text-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path
                                        d='M9.478 3H7.25A2.25 2.25 0 0 0 5 5.25v13.5A2.25 2.25 0 0 0 7.25 21h9a2.25 2.25 0 0 0 2.25-2.25V12M9.478 3c1.243 0 2.272 1.007 2.272 2.25V7.5A2.25 2.25 0 0 0 14 9.75h2.25A2.25 2.25 0 0 1 18.5 12M9.478 3c3.69 0 9.022 5.36 9.022 9M9 16.5h6m-6-3h4' />
                                </svg>
                                Textos de Ex치menes
                            </h2>
                            <div class="header-controls">
                                <div class="utility-buttons-inline">
                                    <button id="addNewExamBtn" class="utility-button-inline add-exam-btn">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round">
                                            <line x1="12" y1="5" x2="12" y2="19"></line>
                                            <line x1="5" y1="12" x2="19" y2="12"></line>
                                        </svg>
                                        Agregar Nuevo
                                    </button>
                                    <button id="clearAllExamsBtn" class="utility-button-inline">Borrar Todo</button>
                                </div>
                            </div>
                        </div>
                        <div class="exams-container" id="examsContainer">
                            <div class="exam-item" data-exam-id="1">
                                <div class="exam-header">
                                    <span class="exam-title">Examen #1</span>
                                    <div class="exam-controls">
                                        <button class="exam-paste-btn" title="Pegar texto">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                stroke-linejoin="round">
                                                <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                                                <path
                                                    d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2">
                                                </path>
                                            </svg>
                                        </button>
                                        <button class="exam-clear-btn" title="Limpiar texto">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                stroke-linejoin="round">
                                                <path d="M3 6h18"></path>
                                                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                                                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                                            </svg>
                                        </button>
                                        <button class="exam-remove-btn" title="Eliminar examen" style="display: none;">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                stroke-linejoin="round">
                                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                                <line x1="6" y1="6" x2="18" y2="18"></line>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                <div class="exam-input">
                                    <textarea class="exam-textarea" id="copyPasteText"
                                        placeholder="1. En la p치gina pdf del examen presiona: Ctrl + A para seleccionar todo el texto&#10;2. Copia el texto mediante: Ctrl + C&#10;3. Pega el texto aqu칤 mediante: Ctrl + V"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="right-column">
                    <div class="step-card results-card">
                        <h2>
                            <svg class="result-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path
                                    d='M4.077 3c2.81 2.202 4.406 4.157 4.785 5.866.38 1.709.436 3.336.172 4.88H4L12.214 21 20 13.747h-4.784C15.192 10.89 14.12 8.46 12 6.46S7.239 3.307 4.077 3' />
                            </svg>
                            Resultado Extra칤do
                        </h2>

                        <!-- Pesta침as -->
                        <div class="tabs-container">
                            <div class="tabs-header">
                                <button class="tab-button active" data-tab="lista">游늶 Lista</button>
                                <button class="tab-button" data-tab="tabla">游늵 Tabla Comparativa</button>
                            </div>

                            <!-- Contenido de pesta침as -->
                            <div class="tabs-content">
                                <!-- Pesta침a Lista -->
                                <div class="tab-content active" id="tab-lista">
                                    <div class="results-status" id="resultsStatus">
                                        <p class="status-text">Selecciona par치metros y pega el texto para ver los
                                            resultados autom치ticamente</p>
                                    </div>
                                    <div id="results" class="results-content"></div>
                                    <div class="copy-area" id="copyArea" style="display: none;">
                                        <button id="copyBtn" class="copy-button">
                                            <span class="copy-icon">游늶</span>
                                            <span class="copy-text">Copiar Texto</span>
                                        </button>
                                        <button id="copyHtmlBtn" class="copy-button">
                                            <span class="copy-icon">游깷</span>
                                            <span class="copy-text">Copiar HTML</span>
                                        </button>
                                        <button id="copySummernoteBtn" class="copy-button">
                                            <span class="copy-icon">九勇</span>
                                            <span class="copy-text">Summernote</span>
                                        </button>
                                    </div>
                                </div>

                                <!-- Pesta침a Tabla Comparativa -->
                                <div class="tab-content" id="tab-tabla">
                                    <div class="comparative-table-container">
                                        <p class="status-text">Selecciona par치metros y pega el texto para ver la tabla
                                            comparativa autom치ticamente</p>
                                    </div>
                                    <div class="table-actions" id="tableActions" style="display: none;">
                                        <button id="downloadImageBtn" class="copy-button">
                                            <span class="copy-icon">游닞</span>
                                            <span class="copy-text">Descargar como Imagen</span>
                                        </button>
                                        <button id="downloadPdfBtn" class="copy-button">
                                            <span class="copy-icon">游늯</span>
                                            <span class="copy-text">Generar PDF</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer style="text-align: center; margin-top: 8px; margin-bottom: 16px; padding-bottom: 12px;">
        <img id="footerIcon" src="rapido-pulgoso-icon.png" alt="R치pido & Pulgoso"
            style="width:40px; vertical-align: middle; cursor: pointer; filter: brightness(0) invert(1);"
            title="As칤 como que r치pido no s칠...">
        <span
            style="margin-left: 10px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; font-weight: 300; letter-spacing: 3px; color: white; font-size: 14px; text-transform: uppercase; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);">r치pido
            & pulgoso inc. 2025</span>
        <div class="warning-box">
            <p class="warning-text">Esta herramienta no sustituye la revisi칩n detallada, completa y cr칤tica de los
                ex치menes: debe utilizarse solo con el fin de agilizar la extracci칩n y presentaci칩n de datos.</p>
        </div>
    </footer>

    <!-- Modal de Sugerencias -->
    <div id="suggestionModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Env칤anos una sugerencia</h2>
                <button id="closeModalBtn" class="close-modal-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="contact-info-container" style="text-align: center; padding: 20px 0;">
                    <p style="margin-bottom: 20px; line-height: 1.6;">
                        Por ahora no se pueden enviar sugerencias de manera directa, pero si as칤 lo deseas puedes
                        escribir al siguiente correo:
                    </p>

                    <div class="email-box"
                        style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 25px; background: var(--bg-secondary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-color);">
                        <code style="font-size: 1.1em; color: var(--text-primary);">notion.medufro@gmail.com</code>
                        <button id="copyEmailBtn" class="utility-button-inline" title="Copiar correo">
                            <span class="btn-icon">游늶</span>
                        </button>
                    </div>

                    <p style="margin-bottom: 10px; line-height: 1.6;">
                        O escribir al n칰mero <strong>(+56) 9 6141 3151</strong> con un mensaje que incluya tu nombre y
                        sugerencia para el extractor.
                    </p>
                </div>
            </div>
            <div class="modal-footer" style="justify-content: center;">
                <button id="closeModalBtnFooter" class="primary-button">Entendido</button>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <!-- HTML2Canvas para convertir tabla a imagen -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- jsPDF para generar PDFs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js"></script>
</body>

</html>